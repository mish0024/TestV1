<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Valentine Movie Trailer</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body {
  margin:0;
  background: radial-gradient(circle,#ffd6e7,#ffeef6);
  overflow:hidden;
  font-family: system-ui, sans-serif;
  height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
}

/* envelope intro */
.intro { text-align:center; }
.envelope {
  font-size:80px;
  cursor:pointer;
  animation:bounce 1.5s infinite;
}
@keyframes bounce { 50% { transform:translateY(-10px); } }

/* card */
.card {
  display:none;
  background:white;
  padding:30px;
  border-radius:20px;
  text-align:center;
  box-shadow:0 15px 40px rgba(0,0,0,.15);
  width:90%;
  max-width:500px;
}
.card h1 { font-size:28px; margin-bottom:10px; }

.zone { position:relative; height:150px; margin-top:20px; }

button {
  position:absolute;
  top:50%;
  transform:translateY(-50%);
  padding:14px 24px;
  font-size:18px;
  border-radius:999px;
  border:none;
  cursor:pointer;
  font-weight:bold;
  transition: transform 0.15s ease;
}
#yesBtn { background:#ff3b7a; color:white; left:25%; }
#noBtn { background:#ddd; color:black; left:60%; }

/* royal ending */
.royal {
  display:none;
  text-align:center;
  animation:zoom 3s ease forwards;
  font-family:"Brush Script MT",cursive;
  color:#c4005a;
}
@keyframes zoom { from{opacity:0; transform:scale(0.8);} to{opacity:1; transform:scale(1);} }

.scroll {
  background:linear-gradient(#fff8e7,#ffe9c9);
  padding:40px;
  border-radius:20px;
  box-shadow:0 0 50px gold;
  font-size:30px;
  color:#6b2d00;
  position:relative;
}
.crown { font-size:60px; position:absolute; top:-200px; left:50%; transform:translateX(-50%); animation:crownDrop 2s forwards; }
@keyframes crownDrop { to { top:-20px; } }

.highlight { color:#c4005a; font-size:36px; text-shadow:0 0 15px #ff66a3; }

/* roses falling */
.rose { position:fixed; top:-20px; font-size:26px; animation:fall 10s linear forwards; }
@keyframes fall { to { transform:translateY(110vh); opacity:0; } }

/* glitter trail */
.glitter { position:fixed; pointer-events:none; font-size:14px; animation:fade 1s forwards; }
@keyframes fade { to { opacity:0; transform:scale(2); } }

/* handwritten love letter */
#loveLetter { font-size:28px; white-space:pre-wrap; min-height:120px; margin-top:20px; }

/* mobile responsiveness */
@media screen and (max-width:400px){
  .card { padding:25px; font-size:16px; }
  .card h1 { font-size:24px; }
  .zone button { padding:12px 20px; font-size:16px; }
  .scroll { padding:30px; font-size:24px; }
  #loveLetter { font-size:20px; }
}
</style>
</head>

<body>
<audio id="music" loop>
  <source src="https://cdn.pixabay.com/audio/2022/03/15/audio_115b9b4db1.mp3">
</audio>

<div class="intro" id="intro">
  <h2>A message has arrived from your HUSBAND üíå</h2>
  <div class="envelope" onclick="openIntro()">‚úâÔ∏è</div>
</div>

<div class="card" id="game">
  <h1>Will you be my Valentine? üòçüíû</h1>
  <p style="margin-bottom:20px;">You can't say no üòà</p>

  <div class="zone" id="zone">
    <button id="yesBtn">Yes</button>
    <button id="noBtn">No</button>
  </div>
</div>

<div class="royal" id="royal">
  <div class="scroll">
    <div class="crown">üëë</div>
    <div id="loveLetter"></div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>
<script>
const yesBtn = document.getElementById("yesBtn");
const noBtn = document.getElementById("noBtn");
const zone = document.getElementById("zone");
const game = document.getElementById("game");
const royal = document.getElementById("royal");
const intro = document.getElementById("intro");
const music = document.getElementById("music");
const loveLetter = document.getElementById("loveLetter");

let yesScale = 1;
const message = `Hear ye, hear ye‚Ä¶
The royal heart chooses only one.
My Baby S ‚ù§Ô∏è
is forever my Valentine.`;

function typeLetter(text, element, speed=60){
  let i=0;
  function typing(){
    if(i<text.length){ element.textContent += text.charAt(i); i++; setTimeout(typing,speed); }
  }
  typing();
}

function openIntro(){
  intro.style.display="none";
  game.style.display="block";
  music.play();
}

/* -------- YES BUTTON GROWING WITHOUT CAP -------- */
function growYes() {
  yesScale += 0.05; // keeps growing every dodge
  yesBtn.style.transform = `translateY(-50%) scale(${yesScale})`;
}

/* -------- NO BUTTON DODGING -------- */
function clamp(n,min,max){return Math.max(min,Math.min(max,n));}
zone.addEventListener("pointermove", e=>{
  const r = noBtn.getBoundingClientRect();
  const d = Math.hypot((r.x + r.width/2)-e.clientX, (r.y + r.height/2)-e.clientY);
  if(d<120){
    noBtn.style.left = Math.random()*80 + "%";
    noBtn.style.top = Math.random()*80 + "%";
    growYes(); // yes button grows every dodge, unlimited
  }
});

noBtn.addEventListener("click", e=>e.preventDefault());

// YES CLICK
yesBtn.addEventListener("click", ()=>{
  zone.style.display="none";
  game.querySelector("p").style.display="none"; // hide "You can't say no"
  royal.style.display="block";
  typeLetter(message,loveLetter,60);
  roses();
  fireworks();
  music.play();
});

// falling roses
function roses(){
  setInterval(()=>{
    const r=document.createElement("div");
    r.className="rose";
    r.innerHTML="üåπ";
    r.style.left=Math.random()*100+"vw";
    document.body.appendChild(r);
    setTimeout(()=>r.remove(),12000);
  },600);
}

// fireworks
function fireworks(){
  confetti({particleCount:300,spread:160,origin:{y:0.6}});
}

// glitter trail
document.addEventListener("mousemove", e=>{
  const g=document.createElement("div");
  g.className="glitter";
  g.innerHTML="‚ú®";
  g.style.left=e.clientX+"px";
  g.style.top=e.clientY+"px";
  document.body.appendChild(g);
  setTimeout(()=>g.remove(),1000);
});
</script>
</body>
</html>
